<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Táº¡o Äáº·t PhÃ²ng Má»›i</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <h3>ğŸ¨ Lá»… TÃ¢n</h3>
        <a href="dashboard.html">ğŸ“‹ Quáº£n LÃ½ Äáº·t PhÃ²ng</a>
        <a href="room_management.html">ğŸšª Tráº¡ng ThÃ¡i PhÃ²ng</a>
        <a href="shift.html">â° Ca LÃ m Viá»‡c</a>
        <a href="#" onclick="handleLogout(); return false;">ğŸšª ÄÄƒng Xuáº¥t</a>
    </div>

    <div class="main-content">
        <h1>â• Táº¡o Booking Má»›i</h1>
        <div class="card" style="max-width: 600px;">
            <form id="bookingForm">
                <div class="form-group">
                    <label>TÃªn KhÃ¡ch HÃ ng:</label>
                    <input type="text" id="customerName" required placeholder="Nháº­p tÃªn khÃ¡ch...">
                </div>

                <div class="form-group">
                    <label>Chá»n PhÃ²ng (ID):</label>
                    <input type="number" id="roomId" required placeholder="Nháº­p ID phÃ²ng (VD: 1, 2...)">
                </div>

                <div class="form-group">
                    <label>NgÃ y Check-in:</label>
                    <input type="datetime-local" id="checkInDate" required>
                </div>

                <div class="form-group">
                    <label>NgÃ y Check-out:</label>
                    <input type="datetime-local" id="checkOutDate" required>
                </div>

                <button type="submit" class="btn-primary">XÃ¡c Nháº­n Äáº·t</button>
                <button type="button" onclick="window.location.href='dashboard.html'"
                    style="margin-left: 10px; background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Há»§y</button>
            </form>
        </div>
    </div>

    <script src="../../js/common/config.js"></script>
    <script src="../../js/common/auth.js"></script>
    <script src="../../js/common/utils.js"></script>
    <script>
        document.getElementById('bookingForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            // Láº¥y dá»¯ liá»‡u tá»« form
            const requestData = {
                customerName: document.getElementById('customerName').value,
                roomId: parseInt(document.getElementById('roomId').value),
                checkInDate: document.getElementById('checkInDate').value,
                checkOutDate: document.getElementById('checkOutDate').value
            };

            // Validate cÆ¡ báº£n
            if (new Date(requestData.checkInDate) >= new Date(requestData.checkOutDate)) {
                alert("NgÃ y Check-out pháº£i sau ngÃ y Check-in!");
                return;
            }

            try {
                await callAPI('/bookings', 'POST', requestData);
                alert("âœ… Äáº·t phÃ²ng thÃ nh cÃ´ng!");
                window.location.href = "dashboard.html";
            } catch (error) {
                alert("âŒ Lá»—i Ä‘áº·t phÃ²ng: " + error.message);
            }
        });
    </script>
</body>

</html>